apiVersion: batch/v1
kind: Job
metadata:
  name: glass-uploader-job
spec:
  template:
    spec:
      serviceAccountName: k8s-glass-uploader  # Use the KSA we created
      containers:
      - name: glass-uploader
        image: gcr.io/ee-growthandheat/glass-uploader:latest
        env:
          - name: GCP_PROJECT_ID
            value: "ee-growthandheat"
          - name: GCS_BUCKET_NAME
            value: "growthandheat"
          - name: GCS_PREFIX
            value: "glass"
      restartPolicy: Never
  backoffLimit: 1
